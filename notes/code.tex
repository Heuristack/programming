\newcommand{\setupcode}{
\lstset{
  language=C++,
% backgroundcolor=\color{black!5},
  basicstyle=\ttfamily\small,
  breaklines=true,
  prebreak=\raisebox{0ex}[0ex][0ex]{\ensuremath{\hookleftarrow}},
% frame=lines,
  showtabs=false,
  showspaces=false,
  showstringspaces=false,
  keywordstyle=\color{blue}\bfseries,
  stringstyle=\color{green!50!black},
  commentstyle=\color{gray}\itshape,
  tabsize=4,
  numbers=none,
  numberstyle=\ttfamily\scriptsize\color{blue},
  captionpos=b,
  escapeinside={\%*}{*)}
}
}
\lstnewenvironment{code}{\setupcode}{}
\newcommand{\inputcode}[1]{\setupcode\lstinputlisting{#1}}
\newcommand{\inlinecode}[1]{\texttt{#1}}
\newcommand{\cplusplus}{\inlinecode{C++}}

